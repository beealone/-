第一部分 关系数据库理论
=======================

第一章 基本概念
--------------

    关系数据库这个神秘的概念到底是什么含义呢？简单的说，数据库是一种高效且有力地存储和操作信息的工具。
    “高效和有力”有三个方面的含义：第一，它意味着数据是被保护的，免于意外的丢失或损坏；其二，他不需
    要占用过多的资源（包括人和计算机）；其三，它可以在可接受的性能约束下，以恰当的方式检索数据。符合关
    系型的要求，数据库必须实现关系模型。关系模型是根据一系列规则来描述现实世界某些方面的一种方法，这些
    规则是E.F.Codd博士在20世纪60年代末首次提出来的。

    在理论上，一个关系数据库应该是从草图开始构建，但实际上，我们通常使用数据库管理系统（DBMS）的服务。
    一个DBMS有时也被称为数据库管理系统（RDBMS)，但技术上，DBMS必须符合大约300条规则才能被称为是关系型的，
    并且据我所知，到目前为止还有一个商业化的系统完全满足这些规则。本书将介绍两个数据库管理系统：Microsoft
    Jet 和Microsoft SQL Server。

    关系数据库是关系模型的物理实现，清楚的区分这两个概念是很重要的。正如我们将要看到的，维度模型也可以在
    关系型DBMS中实现，如果将概念层和物理层相混淆的话，你将陷入一个十分混乱的状态。

1.1什么是数据库
--------------

    数据库这个术语几乎和“面向对象程序设计”一样的耳熟能详。单词“数据库”可用于描述任何事物。从单一的数据
    集合，比如电话号码列表，到复杂的工具集合，比如SQL Server，又或者是介于简单和复杂之间的一些事物。这种缺乏
    准确性的描述并不一定是坏事，毕竟这只是一个自然语言，但这种不准确性对我们的目标十分不利。因此，我在这里
    将尽量给出数据库更准确的定义。图1-1说明的这里所讨论的术语之间的关系。我们将在本章定义这些术语，并在本书的
    其他部分详细讨论他们。

    尽管关系数据库在现实世界中没有对应的概念，但大多数关系数据库都是为了模型化现实世界的某些方面，我们将这部分
    现实世界称之为“问题域”。由于问题域的自然特性决定啦它是混乱和复杂的--如果不是这样，我们也不需要构建它的
    模型了，将你所设计的数据库系统限制在一个具体的，定义准确的对象集合及其交互中使项目的成功与否的关键。只有这样
    才能对系统的范围作出明智的决策。

    术语数据模型代表问题域的概念描述，使用关系模型时，这个概念包括实体，实体的属性（例如，一个客户是一个实体，他
    可能具有姓名，地址等属性）以及实体约束的定义（例如，客户名字段不能为空）。使用维度模型时，这个概念包含事实和
    维度。我们将在第二部分详细讨论维度模型问题。

    数据模型也包含对实体间的联系以及这些联系上的约束的描述。例如，经理不允许有超过5位直接向他汇报的个人。数据模型
    不包含任何对系统物理层的引用。

    物理层的定义--表和视图的实现--称之为数据库模式（database shcema）或简称为模式（schema），它是将概念模型转换为
    DBMS可以实现的物理表达。注意，模式仍然是概念上的而不是物理上的。模式只是数据模型按数据库引擎的方式描述的另一种
    表达--如表，触发器等等。使用数据库引擎的一个好处是用户永远不需要物理实现，你可以完全忽略B-树，叶节点以及其他物理
    层概念。

    一旦向数据库引擎定义好啦你希望的数据形式，就可以使用任何代码或者交互环境（比如，Microsoft Access，SQL Server），
    数据库引擎将创建一些物理对象（通常是在硬盘的某些地方创建这些对象，但不一定都是这样），然后用户就可以在这些对象
    中存储数据了。结构和数据的结合就是我们所说的*数据库*。这个数据库包括存储数据的物理表，定义的视图，查询，用于不同
    方式检索数据的存储过程，以及将用于加强数据保护的规则。

    术语“数据库”不包括*应用程序*，应用程序是由与用户交互的窗体，报表组成的。同时，数据库也不包括类似中间件，IIS，
    Apache 的内容。术语“数据库”也不包含数据库引擎。因此，Acess的.mdb文件是一个数据库。而Microsoft Jet是一个数据库
    引擎。实际上，一个.mdb文件可以包含应用程序对象，比如窗体，报表，这是我们后面将要讨论的内容。

    为了包含所有这些内容---应用程序，数据库，数据库引擎以及中间件，我们将使用*数据库系统*（database system）这个术语。
    所有这些构成一个生产系统的软件和数据都属于数据库系统的一部分。

1.2数据库工具
-------------

    尽管本书的重点是设计而不是实现，因为抽象理论没有太大的价值，除非你已经知道如何应用这些理论，因此，在这本书中，我们
    将介绍很多使用Microsoft提供的工具构建关系数据库的方法，这样的工具有很多，并且Microsoft引入的新方法和工具也是层出
    不穷，因此，现在让我们花一点时间来看一下这些工具都是什么，以及它们是如何协同工作的。图1-2显示了我们讨论的工具，从
    设计的角度来看，可以很简单的将这些工具看成系统从抽象模型转换为一个现实的生产系统所需的工具，并且这些工具之间的组合
    关系如1-2所示。

1.2.1数据库引擎
--------------

    在最底层的是数据库引擎（database engines），有时也将数据库引擎称为“后端”，但自从“后端”称为一个特定的物理框架（
    我们将在第13章介绍）的专有称呼之后，这个词就显得不太合适啦。这些工具将处理数据的额物理操作--将数据存储的硬盘上，并且
    在需要时从磁盘中取出。我们将介绍两个引擎，Jet数据库引擎和SQL Server。你可能对Microsoft Access不是感到很惊讶，从技术
    上来说，Access是一个前端开发环境，在这个环境中可以使用Jet数据库引擎或者SQL Server引擎以及事实上任何ODBC兼容的数据库
    引擎作为它的数据库存储。它使用Jet来操作存储在.mdb文件中的数据。使用SQL Server（或任何ODBC数据存储）来操作存储在.adp文件
    中的数据。Access总是使用Jet数据库引擎，直到Microsoft Visual Basic 3发布以前，Microsoft 从没强调过它是一个独立的实体。

    Jet数据库引擎和SQL Server尽管有很大的差异，但都是存储和操作数据的非常好的工具，这两个引擎间的差别在于它们的架构以及
    它们面向的问题。Microsoft Jet是桌面型数据库引擎，用于小型到中型的系统（请注意这不是说Jet引擎只适合价值不高的系统）而
    SQL Server使用客户/服务器架构，它面向中等规模到大规模的系统，它允许数千用户同时运行任务繁杂的应用程序，MSDE（Microsoft
    Desktop Engine 的缩写） 是SQL Server的简化版，从设计者的角度来说，在MSDE和SQL Server的完全版之间有一些小差异。但这里
    我们不考虑这些，在本书中我们将介绍这两个数据库引擎之间的差异，并在第13章讨论这两个架构之间的权衡问题。

1.2.2数据访问对象
----------------

    MIcrosoft Access 以及相对使用范围较小的Visual Studio .NET ，提供啦将窗体控件直接绑定到数据源的简单机制，使用户避免了直接
    处理数据库引擎。但是，在很多不同情况下（下面讲到）这种方式并不总是可行的或合适的。此时，用户需要在代码中使用_数据访问对
    象模型来操作数据_。

    数据访问对象模型是程序设计环境和数据库引擎之间的一种连接方式，数据访问控件模型提供啦具有属性和方法的对象集合，这些方法
    可以在代码中使用。由于本书主要讨论的是设计而非实现，因此我们将不深入讨论这些模型之间的权衡问题，但在这里强调一下这些模型
    还是有好处的。

    Microsoft 提供啦三个数据访问对象模型，数据访问对象（Data Access Object），Microsoft ActiveX Data Objects 和 ADO.NET。

1.2.3数据定义环境
-----------------

    Microsoft Jet 和 SQL Server 是我们处理数据和操作数据的物理层面，但我们需要一些方法来告诉它们如何结构化数据。Microsoft
    提供了很多方法来实现这个功能，但我们只详细介绍其中的三个：对于关系模型介绍Access 和SQL Server，对于维度模型介绍
    Analysis Manager 。还有一些工具提供啦几乎相同的功能，但这三个工具是我比较偏爱的。当然，一旦理解这些原理，就可以使用
    对你的工作最有力的工具。

    使用代码定义你的数据库结构也是有可能的，并且我们也将介绍如何实现它，尽管在通常的情况下不推荐这种方式。除非由于某些
    原因你需要在运行时用程序来改变数据的结构（一种可能的例外情况是使用临时表，但我本人对这种做法持强烈的怀疑态度，如果
    数据库模式是不稳定的，那么你可能没有理解问题域)否则，以上这些交互工具使用起来快速，简单并且也更加有趣。

1.2.4前端开发
------------

1.3关系模型
-----------












